{% extends 'base/website/base.html' %}
{% load static %}
{% block title %}Blog - N'Sapka{% endblock %}
{% block content %}

<link rel="stylesheet" href="{% static 'css/website/blog.css' %}">

<!-- Hero Section -->
<section class="hero-section">
    <div class="container">
        <h1 class="hero-title">Explorez Notre Blog</h1>
        <p class="hero-subtitle">Découvrez les histoires fascinantes derrière l'artisanat africain, les traditions et le savoir-faire des artisans</p>
    </div>
</section>

<!-- Blog List Section -->
<section class="blog-section">
    <div class="container">
        <!-- Formulaire de filtre -->
        {% comment %} <form method="get" class="filter-form">
            <div class="filter-group">
                <label for="category">Catégorie</label>
                {{ filter.form.category }}
            </div>
            <div class="filter-group">
                <label for="tags">Tags</label>
                {{ filter.form.tags }}
            </div>
            <button type="submit" class="btn-primary">
                <i class="fas fa-filter"></i>
                Filtrer
            </button>
        </form> {% endcomment %}

        <!-- Liste des articles -->
        <div class="blog-grid">
            {% for post in page_obj %}
            <article class="blog-card">
                <a href="{% url 'blog:post_detail' post.slug %}">
                    <img src="{{ post.featured_image.url }}" alt="{{ post.title }}" class="blog-image">
                    <div class="blog-content">
                        <h3 class="blog-card-title">{{ post.title }}</h3>
                        <p class="blog-excerpt">{{ post.excerpt|truncatewords:20 }}</p>
                        <div class="blog-meta">
                            <span><i class="far fa-calendar-alt"></i> {{ post.published_at|date:"d M Y" }}</span>
                            <span><i class="far fa-user"></i> {{ post.author.username }}</span>
                        </div>
                        <div class="blog-tags">
                            {% for tag in post.tags.all|slice:":3" %}
                            <span class="tag">{{ tag.name }}</span>
                            {% endfor %}
                            {% if post.tags.count > 3 %}
                            <span class="tag">+{{ post.tags.count|add:"-3" }}</span>
                            {% endif %}
                        </div>
                    </div>
                </a>
            </article>
            {% empty %}
            <div class="empty-state">
                <i class="fas fa-newspaper"></i>
                <p>Aucun article ne correspond à vos critères de recherche. Essayez d'autres filtres ou revenez plus tard!</p>
            </div>
            {% endfor %}
        </div>

        <!-- Pagination -->
        {% if page_obj.has_other_pages %}
        <div class="pagination">
            {% if page_obj.has_previous %}
            <a href="?page={{ page_obj.previous_page_number }}{% if request.GET %}&{{ request.GET.urlencode }}{% endif %}" class="page-link">
                <i class="fas fa-chevron-left"></i> Précédent
            </a>
            {% endif %}
            
            {% for num in page_obj.paginator.page_range %}
                {% if page_obj.number == num %}
                    <a href="?page={{ num }}{% if request.GET %}&{{ request.GET.urlencode }}{% endif %}" class="page-link active">{{ num }}</a>
                {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
                    <a href="?page={{ num }}{% if request.GET %}&{{ request.GET.urlencode }}{% endif %}" class="page-link">{{ num }}</a>
                {% endif %}
            {% endfor %}
            
            {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}{% if request.GET %}&{{ request.GET.urlencode }}{% endif %}" class="page-link">
                Suivant <i class="fas fa-chevron-right"></i>
            </a>
            {% endif %}
        </div>
        {% endif %}
        
        <!-- Newsletter spécifique au blog -->
        <div class="blog-newsletter">
            <div class="newsletter-content">
                <h3>Restez informé</h3>
                <p>Inscrivez-vous à notre newsletter pour recevoir nos derniers articles et découvrir les nouvelles tendances de l'artisanat africain.</p>
                <form class="newsletter-form" method="POST" action="{% url 'website:newsletter_subscribe' %}">
                    {% csrf_token %}
                    <input type="email" name="email" placeholder="Votre adresse email" required>
                    <button type="submit">
                        <i class="fas fa-paper-plane"></i>
                        S'inscrire
                    </button>
                </form>
            </div>
        </div>
    </div>
</section>
{% endblock %}








{% comment %} {% extends 'base/website/base.html' %}
{% load static %}
{% block title %}Blog - N'Sapka{% endblock %}
{% block content %}

<link rel="stylesheet" href="{% static 'css/website/blog.css' %}">

<!-- Hero Section -->
<section class="hero-section">
    <div class="container">
        <h1 class="hero-title">Blog</h1>
    </div>
</section>

<!-- Blog List Section -->
<section class="blog-section">
    <div class="container">
        <h2 class="blog-title">Liste des Blogs</h2>
        <p class="blog-subtitle">Découvrez les histoires et inspirations derrière l'artisanat africain.</p>

        <!-- Formulaire de filtre -->
        <form method="get" class="filter-form">
            <div class="filter-group">
                <label for="category">Catégorie :</label>
                {{ filter.form.category }}
            </div>
            <div class="filter-group">
                <label for="tags">Tags :</label>
                {{ filter.form.tags }}
            </div>
            <button type="submit" class="btn-primary">Filtrer</button>
        </form>

        <!-- Liste des articles -->
        <div class="blog-grid">
            {% for post in page_obj %}
            <article class="blog-card">
                <a href="{% url 'blog:post_detail' post.slug %}">
                    <img src="{{ post.featured_image.url }}" alt="{{ post.title }}" class="blog-image">
                    <div class="blog-content">
                        <h3 class="blog-card-title">{{ post.title }}</h3>
                        <p class="blog-excerpt">{{ post.excerpt|truncatewords:30 }}</p>
                        <div class="blog-meta">
                            <span><i class="far fa-calendar-alt"></i> {{ post.published_at|date:"d M Y" }}</span>
                            <span><i class="far fa-user"></i> {{ post.author.username }}</span>
                        </div>
                        <div class="blog-tags">
                            {% for tag in post.tags.all %}
                            <span class="tag">{{ tag.name }}</span>
                            {% endfor %}
                        </div>
                    </div>
                </a>
            </article>
            {% empty %}
            <p>Aucun article trouvé.</p>
            {% endfor %}
        </div>

        <!-- Pagination -->
        {% if page_obj.has_other_pages %}
        <div class="pagination">
            {% if page_obj.has_previous %}
            <a href="?page={{ page_obj.previous_page_number }}{% if request.GET %}&{{ request.GET.urlencode }}{% endif %}" class="page-link">« Précédent</a>
            {% endif %}
            {% for num in page_obj.paginator.page_range %}
            <a href="?page={{ num }}{% if request.GET %}&{{ request.GET.urlencode }}{% endif %}" class="page-link {% if page_obj.number == num %}active{% endif %}">{{ num }}</a>
            {% endfor %}
            {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}{% if request.GET %}&{{ request.GET.urlencode }}{% endif %}" class="page-link">Suivant »</a>
            {% endif %}
        </div>
        {% endif %}
    </div>
</section>
{% endblock %} {% endcomment %}











{% comment %} {% extends 'base/website/base.html' %}
{% load static %}
{% block title %}Blog - N'Sapka{% endblock %}
{% block content %}

<link rel="stylesheet" href="{% static 'css/website/blog.css' %}">

<section class="blog-section">
    <div class="container">
        <h1 class="blog-title">Notre Blog</h1>
        <p class="blog-subtitle">Découvrez les histoires et inspirations derrière l'artisanat africain.</p>

        <!-- Formulaire de filtre -->
        <form method="get" class="filter-form">
            <div class="filter-group">
                <label for="category">Catégorie :</label>
                {{ filter.form.category }}
            </div>
            <div class="filter-group">
                <label for="tags">Tags :</label>
                {{ filter.form.tags }}
            </div>
            <button type="submit" class="btn-primary">Filtrer</button>
        </form>

        <!-- Liste des articles -->
        <div class="blog-grid">
            {% for post in page_obj %}
            <article class="blog-card">
                <a href="{% url 'blog:post_detail' post.slug %}">
                    <img src="{{ post.featured_image.url }}" alt="{{ post.title }}" class="blog-image">
                    <div class="blog-content">
                        <h2 class="blog-card-title">{{ post.title }}</h2>
                        <p class="blog-excerpt">{{ post.excerpt|truncatewords:30 }}</p>
                        <div class="blog-meta">
                            <span><i class="far fa-calendar-alt"></i> {{ post.published_at|date:"d M Y" }}</span>
                            <span><i class="far fa-user"></i> {{ post.author.username }}</span>
                        </div>
                        <div class="blog-tags">
                            {% for tag in post.tags.all %}
                            <span class="tag">{{ tag.name }}</span>
                            {% endfor %}
                        </div>
                    </div>
                </a>
            </article>
            {% empty %}
            <p>Aucun article trouvé.</p>
            {% endfor %}
        </div>

        <!-- Pagination -->
        {% if page_obj.has_other_pages %}
        <div class="pagination">
            {% if page_obj.has_previous %}
            <a href="?page={{ page_obj.previous_page_number }}{% if request.GET %}&{{ request.GET.urlencode }}{% endif %}" class="page-link">&laquo; Précédent</a>
            {% endif %}
            {% for num in page_obj.paginator.page_range %}
            <a href="?page={{ num }}{% if request.GET %}&{{ request.GET.urlencode }}{% endif %}" class="page-link {% if page_obj.number == num %}active{% endif %}">{{ num }}</a>
            {% endfor %}
            {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}{% if request.GET %}&{{ request.GET.urlencode }}{% endif %}" class="page-link">Suivant &raquo;</a>
            {% endif %}
        </div>
        {% endif %}
    </div>
</section>
{% endblock %} {% endcomment %}