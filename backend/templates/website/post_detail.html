{% extends 'base/website/base.html' %}
{% load static %}
{% block title %}{{ post.title }} - N'Sapka{% endblock %}
{% block content %}

<link rel="stylesheet" href="{% static 'css/website/blog.css' %}">
<link rel="stylesheet" href="{% static 'css/website/markdown.css' %}">

<!-- Hero Section avec image et overlay plus √©l√©gant -->
<section class="hero-section" style="background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.7)), url('{{ post.featured_image.url }}') no-repeat center center; background-size: cover; background-attachment: fixed;">
    <div class="container">
        <div class="hero-content">
            {% for tag in post.tags.all %}
                <span class="hero-tag">{{ tag.name }}</span>
            {% endfor %}
            <h1 class="hero-title">{{ post.title }}</h1>
            <div class="hero-meta">
                <span>üìÖ {{ post.published_at|date:"d M Y" }}</span>
                <span>üë§ {{ post.author.username }}</span>
                <span>üëÅÔ∏è {{ post.view_count }} vues</span>
            </div>
        </div>
    </div>
</section>

<section class="blog-detail-section">
    <div class="container">
        <div class="blog-layout">
            <article class="blog-post">
                <!-- Contenu principal avec style Markdown -->
                <div class="blog-content markdown-body">
                    {{ post.content|safe }}
                </div>
                
                <!-- Partage sur les r√©seaux sociaux avec design am√©lior√© -->
                <div class="social-share">
                    <div class="share-divider">
                        <span>Partagez cet article</span>
                    </div>
                    <div class="share-buttons">
                        <a href="https://www.facebook.com/sharer/sharer.php?u={{ request.build_absolute_uri }}" target="_blank" class="share-button facebook">
                            FB
                        </a>
                        <a href="https://twitter.com/intent/tweet?text={{ post.title|urlencode }}&url={{ request.build_absolute_uri }}" target="_blank" class="share-button twitter">
                            TW
                        </a>
                        <a href="https://www.linkedin.com/shareArticle?mini=true&url={{ request.build_absolute_uri }}&title={{ post.title|urlencode }}" target="_blank" class="share-button linkedin">
                            LI
                        </a>
                        <a href="https://api.whatsapp.com/send?text={{ post.title|urlencode }} {{ request.build_absolute_uri }}" target="_blank" class="share-button whatsapp">
                            WA
                        </a>
                    </div>
                </div>
                
                <!-- Informations sur l'auteur -->
                <div class="author-card">
                    <div class="author-avatar">
                        {% if post.author.profile_picture_url %}
                            <img src="{{ post.author.profile_picture_url }}" alt="{{ post.author.username }}">
                        {% else %}
                            <div class="avatar-placeholder">{{ post.author.username|first|upper }}</div>
                        {% endif %}
                    </div>
                    <div class="author-info">
                        <h3>{{ post.author.get_full_name|default:post.author.username }}</h3>
                        <p>Auteur √† N'Sapka</p>
                    </div>
                </div>
            </article>

            <!-- Section des commentaires redessin√©e -->
            <div class="comments-section">
                <h2>üí¨ Commentaires <span class="comments-count">({{ comments.count }})</span></h2>
                
                {% for comment in comments %}
                <div class="comment">
                    <div class="comment-avatar">
                        {% if comment.author.profile_picture_url %}
                            <img src="{{ comment.author.profile_picture_url }}" alt="{{ comment.author.username }}">
                        {% else %}
                            <div class="avatar-placeholder">{{ comment.author.username|first|upper }}</div>
                        {% endif %}
                    </div>
                    <div class="comment-body">
                        <div class="comment-header">
                            <span class="comment-author">{{ comment.author.username }}</span>
                            <span class="comment-date">{{ comment.created_at|date:"d M Y √† H:i" }}</span>
                        </div>
                        <div class="comment-content">
                            {{ comment.content }}
                        </div>
                    </div>
                </div>
                {% empty %}
                <div class="empty-comments">
                    <p>üí≠ Soyez le premier √† laisser un commentaire sur cet article.</p>
                </div>
                {% endfor %}

                <!-- Formulaire de commentaire redessin√© -->
                {% if user.is_authenticated %}
                <form method="post" class="comment-form">
                    {% csrf_token %}
                    <h3>Laissez votre commentaire</h3>
                    {{ comment_form.as_p }}
                    <button type="submit" class="btn-primary">
                        üì® Publier le commentaire
                    </button>
                </form>
                {% else %}
                <div class="login-prompt">
                    <p>üîí <a href="{% url 'login' %}">Connectez-vous</a> pour laisser un commentaire.</p>
                </div>
                {% endif %}
            </div>
        </div>
        
        <!-- Articles similaires avec design plus attrayant -->
        {% if related_posts %}
        <div class="related-posts">
            <h3>Vous pourriez aussi aimer</h3>
            <div class="related-posts-grid">
                {% for related in related_posts %}
                <article class="blog-card">
                    <a href="{% url 'blog:post_detail' related.slug %}">
                        <div class="blog-card-image-container">
                            <img src="{{ related.featured_image.url }}" alt="{{ related.title }}" class="blog-image">
                            {% for tag in related.tags.all|slice:":1" %}
                            <span class="blog-card-tag">{{ tag.name }}</span>
                            {% endfor %}
                        </div>
                        <div class="blog-content">
                            <h3 class="blog-card-title">{{ related.title }}</h3>
                            <div class="blog-meta">
                                <span>üìÖ {{ related.published_at|date:"d M Y" }}</span>
                                <span>üëÅÔ∏è {{ related.view_count }} vues</span>
                            </div>
                        </div>
                    </a>
                </article>
                {% endfor %}
            </div>
        </div>
        {% endif %}
    </div>
</section>

{% endblock %}









{% comment %} {% extends 'base/website/base.html' %}
{% load static %}
{% block title %}{{ post.title }} - N'Sapka{% endblock %}
{% block content %}

<link rel="stylesheet" href="{% static 'css/website/blog.css' %}">

<!-- Hero Section avec image de l'article -->
<section class="hero-section" style="background: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('{{ post.featured_image.url }}') no-repeat center center; background-size: cover;">
    <div class="container">
        <h1 class="hero-title">{{ post.title }}</h1>
        <div class="hero-meta">
            <span><i class="far fa-calendar-alt"></i> {{ post.published_at|date:"d M Y" }}</span>
            <span><i class="far fa-user"></i> {{ post.author.username }}</span>
            <span><i class="far fa-eye"></i> {{ post.view_count }} vues</span>
        </div>
    </div>
</section>

<section class="blog-detail-section">
    <div class="container">
        <article class="blog-post">
            <div class="blog-tags">
                {% for tag in post.tags.all %}
                <span class="tag">{{ tag.name }}</span>
                {% endfor %}
            </div>
            
            <div class="blog-content">
                {{ post.content|safe }}
            </div>
            
            <!-- Partage sur les r√©seaux sociaux -->
            <div class="social-share">
                <p>Partagez cet article :</p>
                <div class="share-buttons">
                    <a href="https://www.facebook.com/sharer/sharer.php?u={{ request.build_absolute_uri }}" target="_blank" class="share-button facebook">
                        <i class="fab fa-facebook-f"></i>
                    </a>
                    <a href="https://twitter.com/intent/tweet?text={{ post.title|urlencode }}&url={{ request.build_absolute_uri }}" target="_blank" class="share-button twitter">
                        <i class="fab fa-twitter"></i>
                    </a>
                    <a href="https://www.linkedin.com/shareArticle?mini=true&url={{ request.build_absolute_uri }}&title={{ post.title|urlencode }}" target="_blank" class="share-button linkedin">
                        <i class="fab fa-linkedin-in"></i>
                    </a>
                    <a href="https://api.whatsapp.com/send?text={{ post.title|urlencode }} {{ request.build_absolute_uri }}" target="_blank" class="share-button whatsapp">
                        <i class="fab fa-whatsapp"></i>
                    </a>
                </div>
            </div>
        </article>

        <!-- Section des commentaires -->
        <div class="comments-section">
            <h2>Commentaires ({{ comments.count }})</h2>
            {% for comment in comments %}
            <div class="comment">
                <div class="comment-header">
                    <span class="comment-author">{{ comment.author.username }}</span>
                    <span class="comment-date">{{ comment.created_at|date:"d M Y H:i" }}</span>
                </div>
                <p>{{ comment.content }}</p>
            </div>
            {% empty %}
            <p class="empty-comments">Soyez le premier √† laisser un commentaire sur cet article.</p>
            {% endfor %}

            <!-- Formulaire de commentaire -->
            {% if user.is_authenticated %}
            <form method="post" class="comment-form">
                {% csrf_token %}
                <h3>Laissez votre commentaire</h3>
                {{ comment_form.as_p }}
                <button type="submit" class="btn-primary">
                    <i class="far fa-paper-plane"></i>
                    Publier le commentaire
                </button>
            </form>
            {% else %}
            <div class="login-prompt">
                <p><a href="{% url 'login' %}">Connectez-vous</a> pour laisser un commentaire.</p>
            </div>
            {% endif %}
        </div>
        
        <!-- Articles similaires -->
        {% if related_posts %}
        <div class="related-posts">
            <h3>Articles similaires</h3>
            <div class="related-posts-grid">
                {% for related in related_posts %}
                <article class="blog-card">
                    <a href="{% url 'blog:post_detail' related.slug %}">
                        <img src="{{ related.featured_image.url }}" alt="{{ related.title }}" class="blog-image">
                        <div class="blog-content">
                            <h3 class="blog-card-title">{{ related.title }}</h3>
                            <div class="blog-meta">
                                <span><i class="far fa-calendar-alt"></i> {{ related.published_at|date:"d M Y" }}</span>
                            </div>
                        </div>
                    </a>
                </article>
                {% endfor %}
            </div>
        </div>
        {% endif %}
    </div>
</section>

{% endblock %} {% endcomment %}




{% comment %} {% extends 'base/website/base.html' %}
{% load static %}
{% block title %}{{ post.title }} D√©tail Blog- N'Sapka{% endblock %}
{% block content %}

<link rel="stylesheet" href="{% static 'css/website/blog.css' %}">

<section class="blog-detail-section">
    <div class="container">
        <article class="blog-post">
            <img src="{{ post.featured_image.url }}" alt="{{ post.title }}" class="blog-post-image">
            <h1 class="blog-post-title">{{ post.title }}</h1>
            <div class="blog-meta">
                <span><i class="far fa-calendar-alt"></i> {{ post.published_at|date:"d M Y" }}</span>
                <span><i class="far fa-user"></i> {{ post.author.username }}</span>
                <span><i class="far fa-eye"></i> {{ post.view_count }} vues</span>
            </div>
            <div class="blog-tags">
                {% for tag in post.tags.all %}
                <span class="tag">{{ tag.name }}</span>
                {% endfor %}
            </div>
            <div class="blog-content">
                {{ post.content|safe }}
            </div>
        </article>

        <!-- Section des commentaires -->
        <div class="comments-section">
            <h2>Commentaires ({{ comments.count }})</h2>
            {% for comment in comments %}
            <div class="comment">
                <div class="comment-header">
                    <span class="comment-author">{{ comment.author.username }}</span>
                    <span class="comment-date">{{ comment.created_at|date:"d M Y H:i" }}</span>
                </div>
                <p>{{ comment.content }}</p>
            </div>
            {% empty %}
            <p>Aucun commentaire pour le moment.</p>
            {% endfor %}

            <!-- Formulaire de commentaire -->
            {% if user.is_authenticated %}
            <form method="post" class="comment-form">
                {% csrf_token %}
                {{ comment_form.as_p }}
                <button type="submit" class="btn-primary">Publier le commentaire</button>
            </form>
            {% else %}
            <p><a href="{% url 'login' %}">Connectez-vous</a> pour laisser un commentaire.</p>
            {% endif %}
        </div>
    </div>
</section>
{% endblock %} {% endcomment %}