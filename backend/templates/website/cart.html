<!-- cart.html -->
{% extends 'base/website/base.html' %}
{% load static %}
{% block title %}N'Sapka- Panier{% endblock %}
{% block content %}

<link rel="stylesheet" href="{% static 'css/website/cart.css' %}">

<main class="cart-page">
    <!-- Fil d'Ariane -->
    <div class="breadcrumb">
        <div class="container">
            <!-- AJOUT DE 'website:' -->
            <a href="{% url 'website:home' %}">Accueil</a>
            <span class="separator">/</span>
            <span class="current">Panier</span>
        </div>
    </div>

    <div class="cart-container container">
        <h1 class="cart-title">Mon Panier</h1>

        <div class="cart-content">
            <!-- Liste des produits -->
            <div class="cart-items">
                <!-- Message si le panier est vide -->
                <div class="empty-cart hidden">
                    <i class="fas fa-shopping-cart"></i>
                    <h2>Votre panier est vide</h2>
                    <p>Découvrez nos produits et commencez votre shopping</p>
                    <!-- CORRECTION ICI : ajout de 'website:' -->
                    <a href="{% url 'website:products' %}" class="start-shopping">Commencer les achats</a>
                </div>
            </div>

            <!-- Résumé de la commande -->
            <div class="cart-summary">
                <h3>Récapitulatif</h3>

                <!-- Sous-total -->
                <div class="summary-line">
                    <span>Sous-total</span>
                    <span class="subtotal">0.00 F CFA</span>
                </div>

                <!-- Livraison -->
                <div class="summary-line">
                    <span>Livraison</span>
                    <span class="shipping">Gratuite</span>
                </div>

                <!-- Code promo -->
                <div class="promo-code">
                    <input type="text" placeholder="Code promo" id="promoCode">
                    <button class="apply-promo">Appliquer</button>
                </div>

                <!-- Total -->
                <div class="summary-line total-line">
                    <span>Total</span>
                    <span class="total">0.00 F CFA</span>
                </div>

                <!-- Bouton de paiement -->
                <form id="checkout-form" method="POST" action="{% url 'website:payment' %}">
                    {% csrf_token %}
                    <input type="hidden" name="cart_data" id="cart-data-input">
                    <button type="submit" class="checkout-btn" id="checkout-btn" disabled>
                        Procéder au paiement
                    </button>
                </form>

                <!-- Continuer les achats -->
                <div class="cart-links">
                    <!-- AJOUT DE 'website:' -->
                    <a href="{% url 'website:products' %}" class="continue-shopping">
                        <i class="fas fa-arrow-left"></i>
                        Continuer mes achats
                    </a>
                </div>

                <!-- Moyens de paiement -->
                <div class="payment-methods">
                    <p>Nous acceptons :</p>
                    <div class="payment-icons">
                        <i class="fab fa-cc-visa"></i>
                        <i class="fab fa-cc-mastercard"></i>
                        <i class="fab fa-cc-paypal"></i>
                        <i class="fab fa-cc-apple-pay"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

<!-- Script du panier -->
<script src="{% static 'js/website/cart.js' %}"></script>

<style>
    .checkout-btn {
        width: 100%;
        padding: 1rem;
        background-color: var(--primary-color, #D4A574);
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .checkout-btn:disabled {
        background-color: #ccc;
        cursor: not-allowed;
        opacity: 0.6;
    }

    .checkout-btn:not(:disabled):hover {
        background-color: var(--primary-dark, #C49664);
        transform: translateY(-2px);
    }
</style>

{% endblock %}
